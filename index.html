<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatbot de Jose</title>
<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: #eef2f3;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
}
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    max-width: 600px;
    padding: 10px 20px;
    background-color: #ffffff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 10;
}
header h1 {
    margin: 0;
    font-size: 1.2rem;
}
header div {
    display: flex;
    gap: 10px;
}
#chat-container {
    width: 100%;
    max-width: 600px;
    height: 400px;
    margin: 10px 0;
    background-color: #ffffff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}
.bot-message, .user-message {
    display: flex;
    align-items: flex-start;
    margin: 10px 0;
    animation: fadeIn 0.4s ease-in;
}
.avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-right: 10px;
}
.bubble {
    padding: 10px 14px;
    border-radius: 12px;
    max-width: 80%;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.bot-message .bubble { background-color: #e0e0e0; color: #333; }
.user-message { flex-direction: row-reverse; }
.user-message .avatar { margin-left: 10px; margin-right: 0; }
.user-message .bubble { background-color: #cce5ff; color: #003366; text-align: right; }

#input-area {
    display: flex;
    justify-content: center;
    width: 100%;
    max-width: 600px;
    margin-bottom: 20px;
}
#user-input {
    flex: 1;
    padding: 10px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 6px;
}
#send-button {
    padding: 10px 20px;
    margin-left: 10px;
    font-size: 16px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.buttons-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 10px;
    align-items: center;
}
.bot-button {
    background-color: #a3d9a5;
    color: #2d4b2d;
    padding: 10px 14px;
    font-size: 14px;
    border: 1px solid #8fcf90;
    border-radius: 6px;
    cursor: pointer;
    width: 100%;
    max-width: 300px;
    text-align: left;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    transition: background-color 0.3s ease;
}
.bot-button:hover { background-color: #92c89b; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<header>
    <h1>Chatbot</h1>
    <div>
        <select id="lang-switch">
            <option value="es">ES</option>
            <option value="en">EN</option>
        </select>
        <button id="restart">Reiniciar</button>
    </div>
</header>

<div id="chat-container"></div>

<div id="input-area">
    <input type="text" id="user-input" placeholder="Escribe tu respuesta aquÃ­...">
    <button id="send-button">Enviar</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const chatContainer = document.getElementById("chat-container");
    let lang = 'es';

    const texts = {
        es: {
            greeting: "ðŸ‘‹ Â¡Hola! Soy el asistente de Jose Carlos, diseÃ±ador senior UX/UI. Â¿En quÃ© te gustarÃ­a enfocarte hoy?",
            casesIntro: "AquÃ­ tienes algunos proyectos donde resolvÃ­ problemas reales con diseÃ±o centrado en el usuario. Â¿CuÃ¡l te interesa?",
            buttons: [
                { text: "ðŸŽ¨ Casos de estudio", action: "showCases" },
                { text: "ðŸ‘¤ Sobre mÃ­", url: "https://uxfol.io/p/josecarlos-design/about" },
                { text: "ðŸ“„ Descargar CV", url: "https://uxfol.io/p/josecarlos-design/cv" },
                { text: "âœ‰ï¸ Contacto", url: "https://uxfol.io/p/josecarlos-design/contact" },
                { text: "ðŸ“ Blog", url: "https://uxfol.io/p/josecarlos-design/blog" }
            ],
            cases: [
                { text: "ðŸ§ª Caso 1: RediseÃ±o de app mÃ©dica", url: "https://uxfol.io/p/josecarlos-design/caso1" },
                { text: "ðŸ›ï¸ Caso 2: OptimizaciÃ³n UX para e-commerce", url: "https://uxfol.io/p/josecarlos-design/caso2" },
                { text: "ðŸ“± Caso 3: DiseÃ±o de app de bienestar", url: "https://uxfol.io/p/josecarlos-design/caso3" },
                { text: "ðŸŒ Caso 4: Plataforma educativa inclusiva", url: "https://uxfol.io/p/josecarlos-design/caso4" },
                { text: "ðŸ” Ver todos los casos juntos", url: "https://uxfol.io/p/josecarlos-design" }
            ]
        },
        en: {
            greeting: "ðŸ‘‹ Hi! I'm Jose Carlos's assistant, senior UX/UI designer. What would you like to focus on today?",
            casesIntro: "Here are some projects where I solved real problems with user-centered design. Which one interests you?",
            buttons: [
                { text: "ðŸŽ¨ Case studies", action: "showCases" },
                { text: "ðŸ‘¤ About me", url: "https://uxfol.io/p/josecarlos-design/about" },
                { text: "ðŸ“„ Download CV", url: "https://uxfol.io/p/josecarlos-design/cv" },
                { text: "âœ‰ï¸ Contact", url: "https://uxfol.io/p/josecarlos-design/contact" },
                { text: "ðŸ“ Blog", url: "https://uxfol.io/p/josecarlos-design/blog" }
            ],
            cases: [
                { text: "ðŸ§ª Case 1: Medical app redesign", url: "https://uxfol.io/p/josecarlos-design/caso1" },
                { text: "ðŸ›ï¸ Case 2: UX optimization for e-commerce", url: "https://uxfol.io/p/josecarlos-design/caso2" },
                { text: "ðŸ“± Case 3: Wellness app design", url: "https://uxfol.io/p/josecarlos-design/caso3" },
                { text: "ðŸŒ Case 4: Inclusive educational platform", url: "https://uxfol.io/p/josecarlos-design/caso4" },
                { text: "ðŸ” View all cases", url: "https://uxfol.io/p/josecarlos-design" }
            ]
        }
    };

    function addMessage(sender, text) {
        return new Promise(resolve => {
            const message = document.createElement("div");
            message.className = sender === "bot" ? "bot-message" : "user-message";
            const avatar = document.createElement("img");
            avatar.src = sender === "bot" 
                ? "https://cdn-icons-png.flaticon.com/512/10479/10479785.png" 
                : "https://cdn-icons-png.flaticon.com/512/1077/1077012.png";
            avatar.className = "avatar";
            const bubble = document.createElement("div");
            bubble.className = "bubble";
            bubble.innerText = text;
            message.appendChild(avatar);
            message.appendChild(bubble);
            chatContainer.appendChild(message);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            setTimeout(() => resolve(message), 300);
        });
    }

    async function showButtons(buttonsArray) {
        const buttonsContainer = document.createElement("div");
        buttonsContainer.className = "buttons-container";
        chatContainer.appendChild(buttonsContainer);

        for (let item of buttonsArray) {
            await new Promise(res => setTimeout(res, 400));
            const button = document.createElement("button");
            button.className = "bot-button";
            button.innerText = item.text;
            if (item.url) button.onclick = () => window.open(item.url, "_blank");
            else if (item.action === "showCases") button.onclick = () => showCaseButtons();
            buttonsContainer.appendChild(button);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
    }

    async function showCaseButtons() {
        await addMessage("bot", texts[lang].casesIntro);
        await showButtons(texts[lang].cases);
    }

    async function initChat() {
        chatContainer.innerHTML = "";
        await addMessage("bot", texts[lang].greeting);
        await showButtons(texts[lang].buttons);
    }

    function updateLanguage() {
        const oldLang = lang;
        lang = document.getElementById("lang-switch").value;

        // actualizar mensajes existentes
        const messages = chatContainer.querySelectorAll(".bot-message .bubble");
        messages.forEach((bubble, idx) => {
            if (idx === 0) bubble.innerText = texts[lang].greeting;
        });

        // actualizar botones existentes
        const buttonContainers = chatContainer.querySelectorAll(".buttons-container");
        buttonContainers.forEach((container, idx) => {
            const buttonsArray = idx === 0 ? texts[lang].buttons : texts[lang].cases;
            container.querySelectorAll(".bot-button").forEach((btn, bIdx) => {
                if (buttonsArray[bIdx]) btn.innerText = buttonsArray[bIdx].text;
            });
        });
    }

    document.getElementById("lang-switch").addEventListener("change", updateLanguage);
    document.getElementById("restart").addEventListener("click", initChat);

    initChat();
});
</script>

</body>
</html>
