<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chatbot de Jose</title>
  <style>
    * { box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #eef2f3, #d9e4ff);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    #header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 20px; background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex: 0 0 auto;
    }
    #header h1 { margin: 0; font-size: 18px; color: #333; }
    #header-controls { display: flex; align-items: center; gap: 10px; }
    #restart-button {
      padding: 6px 12px; font-size: 14px; border: none;
      border-radius: 6px; background-color: #007bff; color: #fff;
      cursor: pointer;
    }
    #language-switch {
      font-size: 14px; cursor: pointer; display: flex;
      align-items: center; gap: 6px; user-select: none;
    }
    #language-toggle {
      width: 30px; height: 16px; border-radius: 10px;
      background: #ccc; position: relative; transition: background 0.3s;
    }
    #language-toggle::after {
      content: ""; width: 14px; height: 14px; background: #fff;
      border-radius: 50%; position: absolute; top: 1px; left: 1px;
      transition: transform 0.3s;
    }
    #language-toggle.active { background: #007bff; }
    #language-toggle.active::after { transform: translateX(14px); }

    #chat-container {
      flex: 1 1 auto; min-height: 0; width: 100%; max-width: 600px;
      margin: 20px auto 20px auto;
      background-color: #ffffff;
      border-radius: 12px; padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      overflow-y: auto; display: flex; flex-direction: column;
      overscroll-behavior: contain; scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    .bot-message, .user-message {
      display: flex; align-items: flex-start; margin: 10px 0;
      animation: fadeIn 0.4s ease-in;
    }
    .avatar {
      width: 32px; height: 32px; border-radius: 50%;
      margin-right: 10px; flex-shrink: 0;
    }
    .bubble {
      padding: 10px 14px; border-radius: 12px; max-width: 80%;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05); word-break: break-word;
    }
    .bot-message .bubble { background-color: #e0e0e0; color: #333; }
    .user-message { flex-direction: row-reverse; }
    .user-message .avatar { margin-left: 10px; margin-right: 0; }
    .user-message .bubble {
      background-color: #cce5ff; color: #003366; text-align: right;
    }

    .buttons-container {
      display: flex; flex-direction: column; gap: 10px;
      margin-top: 10px; align-items: center;
    }
    .bot-button {
      background-color: #a3d9a5; color: #2d4b2d;
      padding: 10px 14px; font-size: 14px;
      border: 1px solid #8fcf90; border-radius: 6px;
      cursor: pointer; width: 100%; max-width: 300px;
      text-align: left; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease;
    }
    .bot-button:hover { background-color: #92c89b; }

    .section-divider {
      margin: 25px 0 15px 0;
      position: relative;
      text-align: center;
    }
    .divider-line {
      border-top: 1px solid #E2DBDB;
      position: absolute;
      top: 50%;
      width: 100%;
      transform: translateY(-50%);
      z-index: 1;
    }
    .section-title {
      display: inline-block;
      background-color: white;
      padding: 0 12px;
      position: relative;
      z-index: 2;
      font-size: 13px;
      color: rgba(0, 0, 0, 0.5);
    }
    .close-section {
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 14px;
      color: #999;
      z-index: 2;
      padding: 5px;
    }
    .close-section:hover { color: #666; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

  </style>
</head>
<body>

  <div id="header">
    <h1>Chatbot</h1>
    <div id="header-controls">
      <button id="restart-button">Volver a empezar</button>
      <div id="language-switch">ES / EN <div id="language-toggle"></div></div>
    </div>
  </div>

  <div id="chat-container" aria-live="polite"></div>

  <script>
    const texts = {
      es: {
        sectionTitles: { cases: "Casos de estudio", case1: "Caso 1", about: "Sobre mí" },
        cases: [
          { text: "🧪 Caso 1: Diseño de chat en vivo con IA", url: "https://uxfol.io/p/josecarlos-design/275f9f2c" },
          { text: "🛍️ Caso 2: Optimización UX para e-commerce", url: "#" }
        ],
        case1Teaser: {
          hook: "Aumenté la conversión del chat en vivo con IA + UX pragmático.",
          bullets: "• Embudos de conversación claros\n• Handoff humano sin fricción",
          linkText: "Ver caso completo"
        },
        alreadyShown: " (ya mostrado)", close: "✕"
      },
      en: {
        sectionTitles: { cases: "Case studies", case1: "Case 1", about: "About me" },
        cases: [
          { text: "🧪 Case 1: AI-Driven Live-Chat Design", url: "https://uxfol.io/p/josecarlos-design/275f9f2c" },
          { text: "🛍️ Case 2: UX optimization for e-commerce", url: "#" }
        ],
        case1Teaser: {
          hook: "Boosted live-chat conversion with pragmatic AI + UX.",
          bullets: "• Clear conversational funnels\n• Frictionless human handoff",
          linkText: "View full case"
        },
        alreadyShown: " (already shown)", close: "✕"
      }
    };

    let currentLanguage = "es";
    let contentState = { case1Shown: false };

    const chatContainer = document.getElementById("chat-container");

    function addMessage(sender, text, key) {
      const message = document.createElement("div");
      message.className = sender === "bot" ? "bot-message" : "user-message";
      if (key) message.dataset.key = key;

      const avatar = document.createElement("img");
      avatar.src = sender === "bot"
        ? "https://cdn-icons-png.flaticon.com/512/10479/10479785.png"
        : "https://cdn-icons-png.flaticon.com/512/1077/1077012.png";
      avatar.className = "avatar";

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.innerText = text;

      message.appendChild(avatar);
      message.appendChild(bubble);
      chatContainer.appendChild(message);
    }

    function addSectionDivider(sectionType) {
      const sectionDivider = document.createElement("div");
      sectionDivider.className = "section-divider";
      sectionDivider.dataset.section = sectionType;

      const dividerLine = document.createElement("div");
      dividerLine.className = "divider-line";

      const sectionTitle = document.createElement("span");
      sectionTitle.className = "section-title";
      sectionTitle.textContent = texts[currentLanguage].sectionTitles[sectionType];

      const closeButton = document.createElement("button");
      closeButton.className = "close-section";
      closeButton.innerHTML = texts[currentLanguage].close;
      closeButton.onclick = () => sectionDivider.remove();

      sectionDivider.appendChild(dividerLine);
      sectionDivider.appendChild(sectionTitle);
      sectionDivider.appendChild(closeButton);
      chatContainer.appendChild(sectionDivider);
    }

    /* ========== CASO 1 actualizado ========== */
    function showCase1() {
      if (contentState.case1Shown) return;
      contentState.case1Shown = true;

      addSectionDivider("case1");
      setTimeout(() => addMessage("bot", texts[currentLanguage].case1Teaser.hook, "case1Hook"), 600);
      setTimeout(() => addMessage("bot", texts[currentLanguage].case1Teaser.bullets, "case1Bullets"), 1000);

      // Ahora en lugar de botón, mensaje con link estilo "Sobre mí"
      setTimeout(() => {
        const linkMsg = document.createElement("div");
        linkMsg.className = "bot-message";
        const avatar = document.createElement("img");
        avatar.src = "https://cdn-icons-png.flaticon.com/512/10479/10479785.png";
        avatar.className = "avatar";
        const bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.innerHTML = `<a href="${texts[currentLanguage].cases[0].url}" target="_blank">${texts[currentLanguage].case1Teaser.linkText}</a>`;
        linkMsg.appendChild(avatar);
        linkMsg.appendChild(bubble);
        chatContainer.appendChild(linkMsg);
      }, 1400);
    }

    // --- Demo inicial ---
    addMessage("bot", "Haz click en Caso 1 para probar:", "intro");
    const btn = document.createElement("button");
    btn.className = "bot-button";
    btn.innerText = texts[currentLanguage].cases[0].text;
    btn.onclick = showCase1;
    chatContainer.appendChild(btn);
  </script>
</body>
</html>
