<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Preview • Base H2 + Callout + View more (imágenes intercaladas)</title>
  <meta name="description" content="Estado base: cada sección tiene H2, callout y View more con texto + imágenes intercaladas. Previews y hero opcionales se activan más tarde sin tocar el contenido." />
  <style>
    :root{ --bg:#0b0e12; --ink:#e8edf7; --muted:#a4afc5; --brand:#47c9ff; --card:#0f141b; --line:#1b2330; --radius:18px; --maxw:1100px; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink);} 
    a{color:#bfe7ff;text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:28px 16px 56px}
    header.site{position:sticky; top:0; z-index:50; backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(11,14,18,.85), rgba(11,14,18,.35) 60%, rgba(11,14,18,0));}
    header .bar{display:flex;align-items:center;justify-content:space-between;max-width:var(--maxw);margin:0 auto;padding:14px 16px}
    .brand{font-weight:700} .nav a{color:var(--muted);margin-left:14px}
    .nav a:hover{color:var(--ink)}

    /* ===== Sección compacta (sin hero por defecto) ===== */
    .section-min{margin:22px 0 28px;padding:18px 16px;background:var(--card);border:1px solid var(--line);border-radius:16px}
    .section-min header{display:flex;justify-content:space-between;align-items:baseline;gap:10px;margin-bottom:8px}
    .section-min .eyebrow{color:var(--muted);font-size:12px;letter-spacing:.02em;text-transform:uppercase}
    .section-min h2{margin:0;font-size:clamp(18px,2.4vw,22px)}

    /* Slot opcional para hero (+ tarde) */
    .hero-slot{margin:10px 0 12px}
    .hero-slot[hidden]{display:none}

    /* Callout */
    .callout{background:rgba(71,201,255,.08);border:1px solid rgba(71,201,255,.35);color:#dff3ff;padding:10px 12px;border-radius:12px;margin:8px 0 10px}
    .callout strong{color:#fff}

    /* details */
    details.more{background:#0d1621;border:1px solid var(--line);border-radius:14px;padding:12px}
    details.more > summary{cursor:pointer; color:#cfefff; outline:none; list-style:none}
    details.more > summary::-webkit-details-marker{display:none}
    details.more > summary:after{content:'▾'; float:right; color:#9fdcff}
    details.more[open] > summary:after{content:'▴'}
    .more p{color:var(--ink); margin:10px 0}
    .more ul, .more ol{margin:8px 0 6px 18px; color:var(--ink)}
    .note{color:var(--muted); font-size:13px}

    /* Figuras intercaladas */
    .frame{position:relative; border-radius:16px; overflow:hidden; border:1px solid var(--line); background:#0c1117; margin:12px 0}
    .frame img{display:block; width:100%; height:auto}
    .caption{display:block; font-size:12px; color:var(--muted); padding:6px 8px}
    .fixed-16x9{aspect-ratio:16/9}

    /* ===== Previews automáticos (apagados por defecto) ===== */
    .peek{display:none; grid-template-columns:repeat(12,1fr); gap:8px; margin:10px 0}
    .peek-tile{grid-column:span 4; border:1px solid var(--line); border-radius:12px; overflow:hidden; background:#0c1117; aspect-ratio:16/10; cursor:pointer}
    .peek-tile img{width:100%; height:100%; object-fit:cover; display:block}
    @media (max-width: 900px){ .peek-tile{grid-column:span 12} }
    /* Si activas previews globales o por sección, se muestran */
    body.enable-previews section[data-peek="auto"] > .peek{display:grid}

    /* Lightbox */
    #lb::backdrop{background:rgba(0,0,0,.75)}
    #lb{border:none;padding:0;border-radius:18px;max-width:min(94vw,1200px);background:#0b0e12}
    .lb-wrap{position:relative}
    .lb-img{max-width:min(94vw,1200px);max-height:84vh;display:block}
    .lb-cap{padding:10px 14px;color:#cfefff;font-size:13px}
    .lb-close{position:absolute;top:8px;right:8px;border:none;background:rgba(0,0,0,.45);color:#fff;padding:8px 10px;border-radius:10px;cursor:pointer}
    .lb-close:focus{outline:2px solid var(--brand)}

    /* Chipbar (meta del proyecto) */
    .chipbar{display:flex; flex-wrap:wrap; gap:8px; margin:12px 0}
    .chip{background:rgba(71,201,255,.08); border:1px solid rgba(71,201,255,.35); color:#cfefff; padding:8px 12px; border-radius:999px; font-size:12px}

    footer.site{color:var(--muted); text-align:center; margin-top:30px; font-size:13px}
  </style>
</head>
<body>
  <header class="site" aria-label="Top bar">
    <div class="bar">
      <div class="brand">Jose Carlos — Case Study (Base sin hero por sección)</div>
      <nav class="nav" aria-label="Sections">
        <a href="#overview">Overview</a>
        <a href="#approach">Approach</a>
        <a href="#research">Research</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Meta del proyecto (no es hero grande; es información) -->
    <section class="section-min" aria-labelledby="h-intro">
      <header>
        <span class="eyebrow">Project</span>
        <h2 id="h-intro">AI‑Powered Assistant for Customer Service Teams</h2>
      </header>
      <p>Turning high‑volume conversations into structured, actionable knowledge while reducing manual effort.</p>
      <div class="chipbar">
        <span class="chip">Role: Senior UX/UI</span>
        <span class="chip">Duration: 10 semanas</span>
        <span class="chip">Team: PM • Eng • Ops</span>
      </div>
    </section>

    <!-- OVERVIEW -->
    <section class="section-min" id="overview" aria-labelledby="h-overview" data-peek="auto">
      <header>
        <span class="eyebrow">Overview</span>
        <h2 id="h-overview">Contexto, problema y objetivos</h2>
      </header>
      
      <!-- Slot opcional para hero; por defecto oculto -->
      <div class="hero-slot" hidden></div>

      <p class="callout"><strong>Takeaway:</strong> estandarizamos documentación y activamos insights sin interferir en el flujo del agente.</p>

      <!-- Peek (previews auto); se rellena por JS solo si habilitas previews -->
      <div class="peek" aria-hidden="true"></div>

      <details class="more">
        <summary>View more</summary>
        <div class="more">
          <p>Una aseguradora europea gestiona miles de interacciones diarias. La documentación manual genera errores y coste.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1011/1200/675" alt="Taller de stakeholders">
            <figcaption class="caption">Kick‑off: objetivos, riesgos y métricas.</figcaption>
          </figure>
          <p>Buscamos reducir tiempo post‑llamada y mejorar consistencia de datos en CRM.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1015/1200/675" alt="Panel de analítica con líneas y heatmap">
            <figcaption class="caption">De conversación a insight estructurado.</figcaption>
          </figure>
        </div>
      </details>
    </section>

    <!-- APPROACH -->
    <section class="section-min" id="approach" aria-labelledby="h-approach" data-peek="auto">
      <header>
        <span class="eyebrow">Approach</span>
        <h2 id="h-approach">Design & Cadence</h2>
      </header>

      <div class="hero-slot" hidden></div>

      <p class="callout"><strong>How we worked:</strong> user‑centered, investigación mixta y prototipado rápido; sprints semanales con feedback continuo.</p>

      <div class="peek" aria-hidden="true"></div>

      <details class="more">
        <summary>View more</summary>
        <div class="more">
          <p>Priorizamos impacto y validación con acceso directo al call center.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1040/1200/675" alt="Flujo actual con fricciones">
            <figcaption class="caption">Fricciones durante y post‑llamada.</figcaption>
          </figure>
          <p>Iteramos prototipos en flujo real y validamos con operaciones.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1050/1200/675" alt="Prototipo en alta fidelidad">
            <figcaption class="caption">Prototipo en entorno real.</figcaption>
          </figure>
        </div>
      </details>
    </section>

    <!-- RESEARCH -->
    <section class="section-min" id="research" aria-labelledby="h-research" data-peek="auto">
      <header>
        <span class="eyebrow">User Research</span>
        <h2 id="h-research">Insights que movieron el diseño</h2>
      </header>

      <div class="hero-slot" hidden></div>

      <p class="callout"><strong>What we did:</strong> shadowing, entrevistas, métricas y benchmark.</p>

      <div class="peek" aria-hidden="true"></div>

      <details class="more">
        <summary>View more</summary>
        <div class="more">
          <p>La entrada manual post‑llamada es el principal foco de variabilidad.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1039/1200/675" alt="Tabla de fricciones">
            <figcaption class="caption">Picos = tareas manuales.</figcaption>
          </figure>
          <p>Oportunidad: plantillas + IA con revisión del agente.</p>
          <figure class="frame fixed-16x9" tabindex="0">
            <img class="lazy" data-src="https://picsum.photos/id/1035/1200/675" alt="KPIs y tendencias">
            <figcaption class="caption">Delta y tendencias.</figcaption>
          </figure>
        </div>
      </details>
    </section>

    <footer class="site">© Jose Carlos — Base lista para previews/hero opcionales</footer>
  </main>

  <!-- Lightbox -->
  <dialog id="lb" aria-label="Visor de imagen">
    <div class="lb-wrap">
      <img class="lb-img" id="lbImg" alt="" />
      <div class="lb-cap" id="lbCap"></div>
      <button class="lb-close" aria-label="Cerrar" id="lbClose">✕</button>
    </div>
  </dialog>

  <script>
    // 1) Lazy-load dentro de View more (al abrir)
    document.querySelectorAll('details.more').forEach(det => {
      det.addEventListener('toggle', () => {
        if (det.open) {
          det.querySelectorAll('img.lazy').forEach(img => {
            if (!img.src) { img.src = img.dataset.src; img.loading = 'lazy'; }
          });
          const pk = det.previousElementSibling; // .peek
          if (pk && pk.classList.contains('peek')) pk.style.display = 'none';
        } else {
          const pk = det.previousElementSibling;
          const section = det.closest('section.section-min');
          const previewsOn = document.body.classList.contains('enable-previews') && section?.dataset.peek === 'auto';
          if (pk && pk.classList.contains('peek')) pk.style.display = previewsOn ? 'grid' : 'none';
        }
      });
    });

    // 2) Previews automáticos (solo si activas enable-previews en <body> o por sección más adelante)
    function buildAutoPeek(section){
      const det = section.querySelector('details.more');
      if(!det) return;
      const host = section.querySelector('.peek');
      if(!host) return;
      // Coge las primeras 3 imágenes declaradas en el contenido (data-src)
      const imgs = Array.from(det.querySelectorAll('img.lazy')).slice(0,3);
      if(!imgs.length){ host.remove(); return; }
      host.innerHTML = '';
      imgs.forEach(im => {
        const btn = document.createElement('button');
        btn.className = 'peek-tile';
        const ph = document.createElement('img');
        ph.src = im.dataset.src; ph.alt = im.alt || '';
        btn.appendChild(ph);
        btn.addEventListener('click', () => { det.open = true; setTimeout(()=> im.closest('figure')?.scrollIntoView({behavior:'smooth', block:'center'}), 60); });
        host.appendChild(btn);
      });
      // Mostrar u ocultar según flags
      const previewsOn = document.body.classList.contains('enable-previews') && section.dataset.peek === 'auto';
      host.style.display = previewsOn ? 'grid' : 'none';
    }

    // Prepara todas las secciones (pero por defecto, previews ocultas)
    document.querySelectorAll('section.section-min[data-peek]')
      .forEach(buildAutoPeek);

    // 3) Lightbox sencillo
    (function(){
      const lb = document.getElementById('lb');
      const img = document.getElementById('lbImg');
      const cap = document.getElementById('lbCap');
      const closeBtn = document.getElementById('lbClose');
      document.addEventListener('click', e => {
        const fig = e.target.closest('figure.frame');
        if(!fig) return;
        const i = fig.querySelector('img');
        if(!i) return;
        img.src = i.currentSrc || i.src;
        cap.textContent = (fig.querySelector('.caption')?.textContent || i.alt || '').trim();
        if (typeof lb.showModal === 'function') lb.showModal(); else window.open(img.src, '_blank');
      });
      document.addEventListener('keydown', e => {
        if(e.key === 'Escape' && lb.open) lb.close();
      });
      closeBtn.addEventListener('click', ()=> lb.close());
      lb.addEventListener('click', (e)=>{ if(e.target===lb) lb.close(); });
    })();
  </script>
</body>
</html>
